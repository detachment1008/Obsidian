# 普通模式
---

普通模式是 Vim 的自然放松状态。

许多普通模式命令可以在执行时指定执行的次数，这样它们就可以被执行多次。

普通模式命令的强大，很大程度上源于它可以把操作符与动作命令结合在一起。

# 技巧 7  停顿时请移开画笔
---

作为程序员，只有一小部分时间编写代码。绝大多数时间用来思考、阅读，以及在代码中穿梭浏览。此时应该进入普通模式。

# 技巧 8  把撤销单元切成块
---

在 Vim 中，我们可以控制撤销的粒度。

u 键会触发撤销命令，它会撤销最新的修改，包括在普通模式、可视模式以及命令行模式所触发的命令，也包括在插入模式中修改的文本。

只要我们控制好对 \<Esc\> 键的使用，我们就可以控制插入模式中撤销的粒度，可以是单词、句子或段落

## 多久应该离开一次插入模式呢

建议让每个可撤销块对应一次思考过程，每次思考的时候都是一个自然的停顿点，应该退出插入模式。

当准备好继续写时，按 A 命令就可以回到原来的地方继续写作。

## 在插入模式中移动光标会重置修改状态

在插入模式中，使用 \<Up\>，\<Down>，\<Left>，\<Right> 这些光标键时，会产生一个新的撤销块。可以理解为这是先切回普通模式，然后用 h，j，k，l 命令对光标进行了移动，然后再进入插入模式。

# 技巧 9  构建可重复的修改
---

Vim 在评估完成一件事哪种方式完成最好时，按键最少的更好。

当按键数相同时，可用 . 命令可以重复进行修改的更好

如：使用 daw 命令代替 dbx命令 和 bdw 命令

# 技巧 10  用次数做简单的算术运算
---

大多数普通模式命令可以在执行时指定次数，我们可以用这个功能在做简单的算术运算

## 算术运算命令

\<C - a> 命令：对数字进行加 1 操作
\<C - x> 命令：对数字进行减 1 操作

在不带次数进行时，它们只能加减 1。但是如果带一个次数前缀，那么就可以用它们加减任意整数。即使带上数字，这也被看作是一次修改。

当光标在数字上时，它们会对当前数字进行操作，当光标不在数字上时，它们会对正向的下一个数字进行操作

> Vim 把 0 开头的数字解释为八进制
> 如果不想这样，可以使用 :set nrformats= 这会让 Vim 把所有数字都当成十进制

# 技巧 11  能够重复，就别用次数
---

使用次数，相当于把一次修改的粒度变大了，但是它对于可重复操作不利。

如：d2w/2dw 命令和 dw. 命令

## 只在必要时使用次数

当操作的范围较大，且不需要重复时可以使用次数

而且次数可以保留一个干净、连贯的撤销历史记录

# 技巧 12  双剑合璧，天下无敌
---

Vim 的强大很大程度上源自操作符与动作命令相结合

## 操作符 + 动作命令 = 操作

d{motion} 命令可以对一个字符(dl)、一个单词(daw)、一整个段落(dap)进行操作，它作用的范围由动作命令决定。

c{motion}、y{motion} 以及其他一些命令也类似，它们被统称为 操作符

> g~、gu 和 gU 命令需要两次按键来当作操作符。可以把上述命令的 g 当作是一个前缀字符，用以改变后面的按键行为。即进入了操作符待决模式

操作符与动作命令的结合形成了一种语法。
1. 一个操作由一个操作符，后面跟一个动作命令组成
2. 当一个操作符命令被连续调用两次时，它作用于当前行
	- 如果是操作符待决模式，可以使用简化版本，如：gUU

## 常用的操作符命令

|命令|用途|
|---|---|
|c|修改|
|d|删除|
|y|复制到寄存器|
|g~|反转大小写|
|gu|转换为小写|
|gU|转换为大写|
|>|增加缩进|
|<|减小缩进|
|=|自动缩进|
|!|使用外部程序过滤{motion}所跨越的行|

## 扩展命令组合的威力

我们可以通过自定义动作命令以及操作符来进行扩充。

### 自定义操作符与已有动作命令协同工作

随同 Vim 发布的标准操作符集合相对比较少，但我们可以定义新的操作符

如 commentary.vim 插件：\\\\{motion} 可以将指定范围切换为注释状态

### 已有操作符与自定义动作命令协同工作

如 texobj-entire 插件：ie 和 ae ，它们用于整个文件

> 如果同时安装了 commentary 和 texobj-entire 插件，就可以把它们放在一起使用，即 \\\\ae 就是切换整个文件的注释状态

> 操作符待决模式：如果我们把 Vim 想象成有限状态机，那么操作符待决模式就是一个只接受动作命令的状态，这个状态在我们调用操作符时被激活，然后什么也不做，直到我们提供了一个动作命令，完成整个操作。
>
> 当操作符待决模式被激活时，我们可以像平常一样按 \<Esc> 中止该操作，返回到普通模式
>
> 很多命令都是需要两个或更多的按键来调用的，但是在多数情况下头一个按键只是第二个按键的前缀，这些命令不会激活操作符待决模式，相反可以把它们当作是命名空间，用来扩充可用命令的数目。只有操作符才会激活操作符待决模式。