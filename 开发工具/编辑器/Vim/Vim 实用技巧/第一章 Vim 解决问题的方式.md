# Vim 解决问题的方式
---

本质上来讲，我们的操作都是重复的。所以凡是可以简化重复性的操作的方式，都会成倍地节约我们的时间。

Vim 对重复性操作进行了优化，它之所以能够高效的操作，是因为它会记录我们最近的操作。所以我们必须规划按键动作，掌握这一理念是使用 Vim 的关键

**.** 命令：这是 Vim 中的瑞士军刀，掌握它的用法是精通 Vim 的第一步。

理想的编辑模式：用一次按键移动，用一次按键执行

# 技巧 1  结识 **.** 命令
---

**.** 命令可以让我们重复上一次的**修改**。

上一次的修改可以是很多东西，如：一个字符，整行，甚至是整个文件

当从普通模式进入插入模式，**.** 命令会记住从进入插入模式开始，到退出插入模式为止的全部操作

h，j，k，l 这些移动指令不可重复。即 . 命令不可重复移动命令

## **.** 命令是一个微型宏

我们可以把 **.** 命令理解为一个只能录制一个命令的微型宏

# 技巧 2  不要自我重复
---

## 减少无关的移动

像在行首，行尾这些位置的操作，Vim 提供了专门的复合命令来进行移动

> 1. C = c$
> 2. s = cl
> 3. S = \^c
> 4. I = \^i
> 5. A = $a
> 6. o = A\<CR\>
> 7. O = ko

留意这种应用模式：一键移动，另一键操作

# 技巧 3  以退为进
---

一步操作目标字符(即使是删除)，并进入插入模式，然后完成操作

这样的好处是一步操作就进入了插入模式，可以使用 **.** 命令重复这一操作

## 使移动可重复

h，j，k，l 移动键位是不可重复的。

我们可以使用 f{char} 命令来查找下一处字符出现的位置，并可以使用 ; 命令(或 , 命令进行回退)查找下一个字符

## 合而为一

; 命令带我们到下一个目标字符，而 . 命令可以重复上次的修改

这就是一键移动，一键修改的应用模式啊！

# 技巧 4  执行，重复，回退
---

在面对重复性的工作时，我们需要让移动动作和修改动作都可以重复，这样就可以达到一个最佳的编辑模式

## 除了 . 命令，一些其他重复命令的方式：
1. @: 用来重复任意 Ex 命令
2. & 用来重复上次的 :substitute 命令

如果我们知道如何重复之前的操作，我们就会获取更高的效率：先执行一次，然后重复即可

## 回退的方法：
1. . 命令 -> u 命令
2. f{char} 命令 + ; 命令 -> , 命令 

## 操作，重复，回退！

| 目的 | 操作 | 重复 | 回退 |
| --- | --- | --- | --- |
| 做出一个修改 | {edit} | . | u |
| 行内查找下一个指定字符 | f{char}/t{char} | ; | , |
| 行内查找上一个指定字符 | F{char}/T{char} | ; | , |
| 在文档中查找下一处匹配项| /pattern\<CR\> | n | N |
| 在文档中查找上一处匹配项 | ?pattern\<CR\> | n | N |
| 执行替换 | :s/target/replacement | & | u |
| 执行一系列的修改 | qx{changes}q | @x | u |

# 技巧 5  查找并手动替换

## 替换的方式：
1. :substitute 命令：专门用于查找替换工作
	- 它将替换每一个匹配项，即使我们只想匹配指定的匹配项
2. 修改第一处，在一个个查找替换其他匹配项

## 偷懒的办法：无需输入就可以进行查找

\* 命令：此命令可以查找当前光标下的单词

效果：
1. 光标会跳到下一个匹配项
2. 所有出现这个词的地方都会被高亮显示出来

> 可以运行 :set hls 来进行高亮显示

执行 n 键，即可跳到下一个匹配项

## 使修改可重复

核心思想：即通过一步命令(加插入模式的操作)，即可完成

如：cw 命令会删除从光标位置到单词结尾间的字符，并进入插入模式，之后按下 . 命令，即可重复修改了

## 合而为一

移动操作 + 修改操作：
1. 按下 n 键，跳到下一个单词所在之处
2. 按下 . 键，进行重复修改

它和 :%s/content/copy/g 命令相比，可以审视每一个匹配项，从而决定是否修改

# 技巧 6  结识 . 范式
---

## 回顾前面 3 个 . 命令编辑任务

三种不同方式的移动 + 修改：
1. A;\<Esc\>：这是修改的第一步，然后通过 j . 命令对后续进行修改
2. f{char}s：这是修改的第一步，然后通过若干次 ; . 命令完成任务
3. \* cw：这是修改的第一步，然后通过若干次 n . 命令完成相同的修改

## 理想模式：用一键移动，另一键执行

共同点：
1. 在执行完第一次操作后，通过一键就可以将光标移动到下一个目标上
2. 在执行完第一次操作后，通过 . 命令完成相同的修改

这种模式，被称为 " . 范式 "