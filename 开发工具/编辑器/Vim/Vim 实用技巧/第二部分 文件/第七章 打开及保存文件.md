# 技巧 41 用:edit 命令打开文件
---

:edit：通过绝对路径或相对路径打开文件
- 当 Vim 启动时，它会采用 shell 的活动目录为其工作目录
- 可以使用绝对路径，或根据打开 Vim 时的路径指定相对路径
- 当然，可以通过 Tab 进行自动补全

相对于活动文件目录：
- :edit %\<Tab>
	- % 表示活动缓冲区的完整文件路径，按 Tab 会将其展开
	- 即从打开 Vim 开始，到这个文件的相对路径
- :edit %:h\<Tab>
	- :h 修饰符会去除文件名，但保留路径中的其他部分
	- 即从打开 Vim 开始，到这个文件的目录的相对路径
- :edit %:h\<Tab>M\<Tab>
	- 这样就可以打开当前活动文件同目录下的文件啦

>可以将 %:h\<Tab\> 重新映射，因为它太多了
>如：`cnoremap <expr> %% getcmdtype() == ':' ? expand('%:h').'/' : '%%'`
>即上面将其映射为了 \%%

# 技巧 42 使用:find 打开文件
---

:find：允许我们通过文件名打开一个文件，但无需输入该文件的完整路径
- 但是首先，我们需要配置 path 选项
- :set path+=app/\**
	- ** 通配符会匹配 app/ 目录下的所有子目录
- 当然，也可以使用 Tab 进行自动补全文件名
	- 如果有多个匹配的话，每按一次 Tab 都会匹配一个文件
	- 注意，如果 wildmode 选项从缺省的 full 改成了其他值，那么 Tab 的补全行为就不一样了

# 技巧 43 使用 netrw 管理文件系统
---

这是一个插件，并不是 Vim 核心源代码实现的

需要有如下代码：
```
set nocompatible
filetype plugin on
```

打开文件管理器：
- 即通过 vim 打开一个目录时，就会启动
- 此时，通过 k 与 j 就可以上下移动
- 按 - 就会返回上一级目录，按 \<CR> 就会进入，亦或在 ../ 上按 \<CR>
	- 如果是目录的话，就会进入目录
	- 如果是文件的话，它就会被载入缓冲区并显示
- 在文件中，我们可以用 :edit {path} 打开文件管理器窗口
	- 使用 :edit . 就是在当前工程目录中打开
		- . ：表示当前的工作目录
		- 缩写：:e.
	- 使用 :edit %:h 就是在当前活动文件的目录中打开
		- 亦或使用：:Explore 命令
		- 缩写：:E
- :Sexplore：水平切分窗口中打开目录
- :Vexplore：竖直切分窗口中打开目录

## 与分割窗口协同工作

它不是为目录树的工作准备的
- 它提供了一种工作方式，即
	- 面向文件工作
	- 面向目录工作

## 使用 netrw 完成更多功能

- 创建文件
- 创建目录
- 删除文件或目录
- 重命名文件或目录
- 通过网络读写文件

# 技巧 44 把文件保存到不存在的目录中
---

- 前情提要：可以使用 \<C-g> 查看文件信息

我们可以使用 :edit {file} 打开一个不存在的文件，即使连它所在的目录都不存在
- 我们仍然可以把它加入到缓冲区并编辑
- 但是当我们保存时会报错
	- 补救措施：通过外部命令，赶紧创建
		- :!mkdir -p %:h
		- :write
	- -p：该参数使得 mkdir 创建任何不存在的中间目录
	- %:h：当前打开文件所在的目录

# 技巧 45 以超级用户权限保存文件
---

如果我们修改一个只读文件，它会在缓冲区修改，但是禁止我们将其保存在磁盘上

补救：
- :w !sudo tee % > /dev/null
- 即以超级用户执行 tee 程序，% 为当前活动文件的路径 