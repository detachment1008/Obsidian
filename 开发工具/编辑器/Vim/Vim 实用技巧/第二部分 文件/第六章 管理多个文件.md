# 引言
---

Vim 允许我们同时在多个文件上工作
- 缓冲区列表：记录了一次编辑会话中打开的所有文件
- 参数列表：把缓冲区列表中的文件分组

Vim 还允许把工作区划分成窗口
- 还可以用标签页把分割的窗口组织到一起

# 技巧 36 用缓冲区列表管理打开的文件
---

文件和缓冲区的区别：
- 我们编辑的是文件在内存中的映像，即缓冲区
- 文件是存储在磁盘上的，而缓冲区则存储在内存中
- 当 Vim 打开一个文件时，该文件的内容被读入到一个具有相同名字的缓冲区

操作命令：简易把 b 开头的命令重新映射
- :ls：查看所有被载入到内存中的缓冲区的列表
	- %：表示当前窗口的文件
	- \#：表示下一个轮换的文件
- :bnext：切换到列表中的下一个缓冲区
- :bprev：反向移动
- :bfirst：跳到开头
- :blast：跳到结尾
- :buffer N：直接凭编号跳转到一个缓冲区
- :buffer {bufname}：直接凭名字跳转到一个缓冲区
	- 这个名字只要包含唯一标识的字符即可
	- 也可以使用 Tab 进行补全
- :bufdo：允许我们在所有缓冲区上执行 Ex 命令
	- :argdo：更加实用
- :bdelete 编号1 编号2 或 编号1,编号2 bdelete：删除缓冲区
	- 第一种是逐个删除
	- 第二种是范围删除

# 技巧 37 用参数列表将缓冲区分组
---

参数列表：
- 记录了启动时作为参数传递给 Vim 的文件列表
- \[]：指明了参数列表中哪一个是活动文件
- 它不一定反应启动 Vim 时所传递的参数，我们可以在任意时刻改变参数列表中的内容

填充参数列表：
- args {arglist}
	- {arglist} 可以是文件名，通配符，甚至是 shell 命令的输出结果

用文件名指定文件：
- args index.html app.js

用 Glob 模式指定文件：
- \*：匹配 0 个或多个字符，但是仅限于当前目录
- \*\*：匹配 0 个或多个字符，但它可以递归指定的子目录
	- 即它可以第一个当作 0 个字符，第二个当作任意字符，即当前目录的任意文件
	- 也可以当作任意一个目录文件，然后可以通过它向下递归

用反引号结构指定文件：
- \`命令\`：Vim 会在 shell 中执行反撇号括起来的命令，然后将输出作为参数
	- \`cat .chapters\`

使用参数列表：
- 使用 :args {arglist} 命令一下就可以清空并重设参数列表，然后通过 :next 等命令进行遍历

# 技巧 38 管理隐藏缓冲区
---

缓冲区前有一个 + 号，就标识这个缓冲区被修改过了
- 此时如果不保存，无法正常切换活动文件
- 可以在命令后面加 ! 进行强制切换，此时它就是隐藏缓冲区
	- :bnext!

处理方式：
- :w：写入磁盘
- :e!：磁盘文件重新读入，即回滚修改
- :qa!：关闭所有窗口，并摒弃所有修改
- :wa!：所有修改都写入磁盘

执行 :argdo 或 :bufdo 前，启用 hidden 设置
- 这两个命令的执行就相当于从第一个文件开始执行 shell 命令，直到最后一个
- 但是它的移动，不会加 !
- 所以我们需要启动 hidden 选项，从而可以不用带 ! 就可以执行

# 技巧 39 将工作区切分成窗口
---

创建分割窗口：
- \<C-w>s：水平切分
- \<C-w>v：垂直切分
- :sp\[lit] {file}：水平切分，并在新窗口载入 file 文件
- :vsp\[lit] {file}：垂直切分，并在新窗口载入 file 文件

可以使用 :edit 命令把另一个缓冲区载入活动窗口中

在窗口间切换：
- \<C-w>w：窗口循环
- \<C-w>h：切换到左边
- \<C-w>j：切换到下边
- \<C-w>k：切换到上边
- \<C-w>l：切换到右边

关闭窗口：
- :clo\[se] 或\<C-w>c：关闭活动窗口
- :on\[ly] 或\<C-w>o：只保留活动窗口

改变窗口大小以及重新排列：
- \<C-w>=：所有窗口等宽等高
- \<C-w>\_：最大化活动窗口高度
- \<C-w>|：最大化活动窗口宽度
- \[N]\<C-w>\_：活动窗口高度设置为 N 行
- \[N]\<C-w>|：活动窗口高度设置为 N 列

# 技巧 40 用标签页将窗口分组
---

标签页：可以容纳一系列窗口的容器

打开以及管理标签页：
- tabe {filename}：创建新标签页，并打开该文件
- tabc：关闭当前标签页
- tabo：只保留活动标签页

切换标签页：
- {N}gt 或 :tabn {N}：切换到编号为 N 的标签页
- gt 或 tabn：切换下一个标签页
- gT 或 tabp：切换上一个标签页

重排标签页：
- tabmove \[N]：当 N 为 0 时，当前标签页移动到最前面，如果忽略，则移动到结尾