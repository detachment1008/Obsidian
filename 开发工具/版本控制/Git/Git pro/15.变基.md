# 变基
---

合并分支有两种方法：
- merge
- rebase

# 变基的基本操作
---

merge：三方合并
rebase：将所有的修改"重新播放"

变基的原理：
- 找到两个分支的最近共同祖先
- 对比当前分支(被合并分支)对于祖先的历次提交，提取相应的修改并保存为临时文件
- 将当前分支指向合并分支的最后一次提交
- 将之前保存为临时文件的修改依次应用

# 分支的快进合并
---

两种整合方式的最终效果没有任何区别：
- 但是变基使得提交历史更加整洁
- 它把并行的工作，变的好像是串行一样，即提交历史是一条直线没有分叉

一般的做法是为了向远程分支推送时保持提交历史的整洁：
- 先在自己的分支里开发
- 然后变基到自己的 master 分支上
- 然后提交到主项目

# 更有趣的变基例子
---

从主题里再分出一个主题分支的提交历史：
- 即你不想通过变基操作合并分支内的全部提交，而是合并部分提交
```
git rebase --onto master server client
```

它的意思是：
- 取出client分支
- 找到它从server分支分歧后的补丁
- 把这些补丁在master上重放一遍，即让client看起来像直接基于master修改的一样

截取主题分支上的另一个主题分支，然后变基到其他分支：
```
git rebase master server
```

# 变基的风险
---

如果提交存在于你的仓库之外：
- 那么不要执行变基
- 别人可能基于这些提交开发(即使没有，拉取时也会出现错误)

因为它实际上丢弃了一些提交，用新建的提交去代替了它

即如果丢弃的这些提交在别的地方存在，就不要变基