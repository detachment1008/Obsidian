# 透视投影的视锥体定义

定义视锥的两个概念：
- 宽高比：$\frac{width}{height}$
- 垂直可视角度(越大透视越明显)：field-of-view

则有以下的关系式： $$tan\frac{fovY}{2}=\frac{t}{|n|}$$
宽高比：$$aspect=\frac{r}{t}$$
# 视口变换(Clip to Screen)

本节课的像素坐标定义：
- 像素通过整数坐标来表示，范围是：\[0, width-1]，\[0, height-1]
- 像素的中心点：(x+0.5, y+0.5)
- 屏幕空间范围：\[0, width]，\[0,height]

目的：$[-1,1]^2$ 映射到 $[0,width]$ x $[0,height]$ 上去。$z$ 值暂时不做处理

步骤：
1. 缩放，使得大小一致
$$\begin{bmatrix}
\frac{width}{2}&0&0&0\\
0&\frac{height}{2}&0&0\\
0&0&1&0\\
0&0&0&1\\
\end{bmatrix}$$

2. 平移，使得原点位于左下角的位置
$$\begin{bmatrix}
0&0&0&\frac{width}{2}\\
0&0&0&\frac{height}{2}\\
0&0&0&0\\
0&0&0&1\\
\end{bmatrix}$$

合并起来：
$$\begin{bmatrix}
\frac{width}{2}&0&0&\frac{width}{2}\\
0&\frac{height}{2}&0&\frac{height}{2}\\
0&0&1&0\\
0&0&0&1\\
\end{bmatrix}$$

# 三角形的离散化

- Frame Buffer：内存中的一块区域，用于光栅化成像的设备
- Triangles：最基本的图元

一种最简单的方法做光栅化：采样

采样：就是把一个连续的函数离散化的过程

我们当前的采样：利用像素的中心，在连续的屏幕空间中进行采样

重点：如何判断当前采样点是否在给定的三角形内

方法：三次叉积，然后判断三次的符号是否相同即可

采样的加速方法：轴向包围盒

即找到包围三角形的最小包围盒，然后在这个包围盒内对像素进行判断就可以了。其他像素一定不在三角形内部

另一种采样的加速方法：扫描线法

它适用于窄长，同时又是斜着的三角形，因为它如果用包围盒，就有太多无效的像素了