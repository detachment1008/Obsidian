# 采样理论

给定的三角形，是一个二维的连续的信号值；而我们用给定的像素中心点进行采样，就是以一种固定的频率进行采样的操作；然后我们用像素中心的值，去绘制整个像素块，这一个操作就是重构

采样出现问题的本质：采样频率低，而信号频率快

# 反走样方法：模糊处理再采样

采样前模糊处理：先降低了信号频率，再采样

注意：不能在采样后再模糊处理，这样没有意义，只是把走样的图片整体给模糊了

注意：我们模糊的是源数据，即在采样点处做加权平均，结果就是我们要的模糊的结果

# 频率

傅里叶级数展开：任何一个周期函数，都可以写成一个常数项+一系列正弦函数和一系列余弦函数的相加组合的形式

意义：即任何一个函数，都可以分解为不同的频率

傅里叶变换：将任意一个函数，从时域变为频域

走样：即采样的频率太低，恢复时无法恢复原始信号的高频率，而是用低频率给代替了

# 滤波：去除掉一些特定的频率

1. 高通滤波：将低频的频率给抹去
	- 它会把图像的边界给留下，其他的给抹去
2. 低通滤波：将高频的频率给抹去
	- 它会把图像边界给抹去，即图像会变模糊

滤波=[[4.信号处理#4.2 卷积|卷积]](=平均)

时域上，如果我希望对两个信号进行卷积，对应到频域上，就是这两个信号的频率的乘积。时域的卷积=频域的乘积

采样：重复原始信号频域上的内容

# 反走样

1. 增加采样率
	- 更高分辨率的设备(外部操作)
2. 降低信号频率
	- 先做模糊，再做采样(用一定大小的低通滤波器，进行卷积即可)
		- MSAA(在像素点内取多个采样点，然后取平均)
	- TAA
3. 后期处理
	- FXAA

放大图像时的反走样处理：
- DLSS(基于深度学习的超采样)

# 深度测试

## 画家算法

即从远到近，进行渲染。这样自然而然近处的就会把远处的覆盖了。

存在的问题：
1. 判断物体的远近不容易
2. 无法处理三个物体互相遮挡的情况，只能进行切割了。

## 深度测试

因为难以对物体的远近进行判断，所以我们对每个像素的远近进行判断。

即有两个缓冲：
1. frame buffer：真正显示到屏幕上的缓冲
2. depth buffer：存储每个像素深度的缓冲

我们提前进行一个假设：存储的深度指的是举例近平面的举例，即它永远是正的，且越小距离越近

步骤：
1. 初始化，即初始状态下深度缓冲中的数据都是无限大的，即无限远
2. 对物体开始光栅化，找到一个物体上的某一个像素
3. 判断这个像素和记录当前像素的深度缓冲的值的大小
	- 如果小：即它离的更近，把它存储到 frame buffer，并更新 depth buffer
	- 如果大：说明它离的远，抛弃它，继续寻找下一个像素

注意：如果我们要使用 MSAA 进行反走样，需要对每一个采样点都进行深度测试，以找到正确的值

当然，它处理不了透明物体
