# 曲线

## 贝塞尔曲线

贝塞尔曲线：用一系列的控制点定义一个曲线
- 第一个点和最后一个点是起点和终点
- 中间的点用于控制贝塞尔曲线的走向

迪卡斯特罗算法：描述贝塞尔曲线的生成

以三个点形成的贝塞尔曲线举例：二次贝塞尔曲线
- 定义在起点时是时间 0，终点时是时间 1
- 然后当寻找一个给定时间 t 的点时，先在 $b_0$ 和 $b_1$ 点之间通过 t 进行线性插值得到一个点 $p_0$
- 然后再在 $b_1$ 和 $b_2$ 点之间通过时间 t 再进行线性插值得到第二个点 $p_1$
- 然后再在 $p_0$ 点和 $p_1$ 点之间进行线性插值，得到最终的点 $p$ 。这个点就是我们要找的在时间 t 时的点

所以很明显，它是显式的曲线表示形式

代数上的贝塞尔曲线生成：

还以三个点形成的贝塞尔曲线举例：
- $p_0 = (1-t)b_0+tb1$
- $p_1=(1-t)b1+tb_2$
- $p = (1-t)p_0+tp_1$

合并起来：
$$p=(1-t)^2b_0+2t(1-t)b_1+t^2b_2$$

推广到 $n+1$ 个点形成的贝塞尔曲线：利用伯恩斯坦多项式求和
$$p=\sum_{j=0}^{n}B_j^n(t)b_j$$
- $B_j^n(t)$：$C_n^{j}t^j(1-t)^{n-j}$
- $n$：表示总点数减 1
- $C_n^j=\frac{(n-j+1)*...*n}{j!}$

由上式可发现，如果我们将 $b$ 更换为三维空间中的点，我们就可以得到一个三维空间中的贝塞尔曲线

贝塞尔曲线的规定：
- 它通过起点和终点
- 它起始和结束的切线，要再乘以 $n-1$

贝塞尔曲线的性质：
- 直接对顶点进行仿射变换和对曲线上的每一个点做仿射变换得到的曲线相同
- 凸包性质：贝塞尔曲线一定在控制点形成的凸包内部

## 逐段贝塞尔曲线

人们发现，当用很多控制点形成贝塞尔曲线时，不是很好控制这个曲线

所以我们很少的控制点形成一段一段的贝塞尔曲线，然后将他们首尾连接起来。这就是逐段贝塞尔曲线。(一般用 4 个控制点形成一个贝塞尔曲线)

有一个问题：如何保证连接点也是光滑的呢？
- 保证连接点的导数连续且相等即可
- 即上一段的最后两个控制点和下一段的前两个控制点形成的导数相等(大小和方向均相等)

连续性：
- $C_0$ 连续：即仅仅物理上的连续
- $C_1$ 连续：他们的一阶导数大小和方向均相等，即一阶导数的连续
- ...

## 样条

样条：一系列点控制的一个曲线，保证在任意一个位置都满足一定的连续性

## B-样条

不同的理解：以伯恩斯坦多项式为基函数(然后由不同方式组合形成其他函数)
- 伯恩斯坦多项式在时间 t 对它不同的控制点做一个加权平均
- 用不同点的位置，对伯恩斯坦多项式进行一个加权的求和

相当于是对贝塞尔曲线的一个扩展，它具有局部性
- 原始的贝塞尔曲线，一个控制点移动，全部位置的曲线都会移动，这很不好
- 而 B-样条曲线具有局部性，即一个控制点移动至多只影响它那一部分，而对其他部分的曲线不产生影响(当然，分段贝塞尔曲线也有这样的性质)

它极其复杂(如更加延申的非均匀有理B-样条)

# 曲面

## 贝塞尔曲面

即贝塞尔曲线扩展而形成的曲面

如何形成？以一个 4\*4 形成的贝塞尔曲面举例

1. 首先，形成 4 行，每行四个控制点
2. 然后，每四个控制点形成一个贝塞尔曲线，即获得了四个贝塞尔曲线
3. 然后，我们如果定义一个时间 t ，就可以在这四个贝塞尔曲线上获得四个点
4. 然后，再利用这 4 个点再形成一个贝塞尔曲线
5. 最后，根据不同 t ，可以形成不同的贝塞尔曲线，这些贝塞尔曲线形成的面就是贝塞尔曲面

