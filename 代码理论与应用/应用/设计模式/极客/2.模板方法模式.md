# 模式分类
---

从目的来看：
- 创建型模式：解决对象创建时的工作
- 结构型模式：解决需求变更时对对象结构发生的冲击
- 行为型模式：多个类之间交互的责任划分

从范围来看：
- 类模式：处理类与子类的静态关系
	- 继承
- 对象模式：处理对象之间的动态关系
	- 组合

在变化处使用设计模式
- 重构获得模式

# 重构
---

重构的关键技法：
- 静态->动态
- 早绑定->晚绑定
- 继承->组合
- 编译时依赖->运行时依赖
- 紧耦合->松耦合

# 组件协作型模式
---

通过晚期绑定来实现松耦合：
- 模板方法模式
- 策略模式
- 观察者模式

# 模板方法模式
---

目的：在某个软件的构建过程中
- 有稳定的整体操作结构
- 各个子步骤却有很多改变的需求

按照 C 语言的实现：
- 先定义了稳定的步骤，然后再定义不稳定的步骤
- 然后在子类或 main 函数中进行步骤调用的实现

按照 C++ 语言的实现：
- 我们可以延迟实现，即我们不仅定义了稳定的步骤，同时声明了不稳定的步骤，只是延迟实现
	- 然后我们就可以在父类中进行了步骤的调用实现，因为有稳定的流程，所以应该放在父类
	- 延迟实现：利用虚函数的多态
- 然后在子类中，我们可以重新定义不稳定的步骤

核心：分辨哪些是稳定的，哪些是不稳定的

# 总结
---

当一个过程中，整体步骤是稳定的，我们就把这个整体步骤放在基类，而不要放在子类

站在类库的设计者：
- 不要调用我，让我来调用你
- 这些让我调用你的函数，设置为 protected 函数
- 并设置为虚函数