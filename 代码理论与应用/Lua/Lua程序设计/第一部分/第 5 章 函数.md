# 引言
---

Lua 中的函数：
- 是对语句和表达式进行抽象的主要机制
	- 可以是完成某项任务(无返回值)
	- 可以是只做一些计算结果(有返回值)
 - 如果是无返回值，就被视为是一条语句
 - 如果是有返回值，就被视为一个表达式

参数的调用：
- 即使没有参数，也需要括号
- 除非它只有一个参数，且是一个字面字符串或 table 构造式
- 调用 table 内的函数
	- 通过点调用
	- 通过冒号调用：这是 Lua 为面向对象的调用提供的一种特殊的语法
		- 它将这个table作为函数的第一个参数，隐式的进行传入
- 它不仅可以调用 Lua 的函数，也可以调用 C 语言编写的函数
	- 例如，所有 Lua 标准程序库中的函数都是用 C 语言写的
	- 但这些细节对于 Lua 程序员来说都是透明的，但是调用时没有任何区别

参数：
- 形参是调用函数时，根据实参初始化的
- 不一定要求形参和实参的数量对应，Lua 会自动调整实参的数量以匹配参数表的要求
	- 多了删
	- 少了用 nil 补
	- 可以通过 `n = n or 1` 来定义形参的默认值(即如果为 nil 就使用后面的值了)

# 5.1 多重返回值
---

相当于两个多重赋值：
- 在 return 后列出所有返回值
- 用多个变量接收这个返回值

return 后面不要加括号，否则它只返回一个值(即不管括号中有几个值)

特殊的函数：unpack
- 它接收一个数组为参数
- 并从下标 1 开始返回该数组的所有元素
- `f(unpack(a))`：即无论参数有多少，都在 a 数组中的话，就可以这样调用一个函数

# 5.2 变长参数
---

可以用 `...` 来表示不同数量的实参：
- 它被称为变长参数
- 当函数内希望访问它的变长参数时，仍需要用到 `...`，即它作为了表达式来使用
- `...` 的行为就类似于一个具有多重返回值的函数，它返回的是当前函数的所有变长参数
- 它实际就是一个 arg 的 table 类型
- 如果有固定参数，它需要放在变长参数的前面

```
function foo(abc)
end

function foo(...)
	local a,b,c = ...
end
```

老版本(5.0)：
- 它在函数体中没有 `...` 表达式
- 它用一个隐含的局部 table 变量 arg 来接收所有的变长参数
	- 并且它有一个隐含的字段 n，用来记录变长参数的总数
	- 新版本只有需要时，才会去创建这个 table

# 5.3 具名实参
---

当我们希望根据形参名称传递参数，而不是位置：
```
-- 无效演示
rename(old="old.lua", new="new.lua")

-- 有效演示
rename{old="old.lua", new="new.lua"}
```

即将参数放在一个 table 中，并将这个 table 作为唯一的实参传递给函数
- 如果只有一个 table 的构造作为参数，就不用括号啦
- 包括一个立即数 string 类型，也不用括号