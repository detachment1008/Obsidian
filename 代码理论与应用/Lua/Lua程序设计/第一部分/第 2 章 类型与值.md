# 引言
---

Lua 是动态类型语言：
- 即没有类型定义的语言
- 每个值都携带了它自身的类型信息

[[2.变量和基本类型#^3c3d63|类型]]：
- nil
- boolean
- number
- string
- userdata
- function
- thread
- table

函数 type 可根据一个值返回其类型名称

Lua 中，函数是作为第一类值来看代的：
- 即可以像操作其他值一样来操作一个函数值

# 2.1 nil
---

它的主要功能是用于区别其他任何值：
- 将一个变量赋予 nil 就等于空

# 2.2 boolean
---

boolean 有两个可选值：
- true
- false

但是在类型转换中：
- 除了 false 和 nil 会被视为假
- 其他的都会被视为真

# 2.3 number
---

number 用于表示实数：
- Lua 的数字可以表示任何 32 位整数，而不会产生四舍五入的错误
- 它是用双精度来表示一个整数的

通过重新编译 Lua，可以非常方便地使用其他类型来表示数字
- 具体做法见 luaconf.h 文件

数字常量的写法：可以使用普通写法，也可以使用科学计数法
- 4
- 0.4
- 4.57e-3
- 0.3e12
- 5e+20

# 2.4 string
---

Lua 中的字符串表示一个字符序列：
- Lua 完全采用 8 位编码
	- ASCII 就是 8 位编码
- 即 Lua 字符串中的字符可以具有任何数值编码，包括数值 0
- 也就是说，可以将任何二进制数据存储到一个字符串中

Lua 字符串是不可变值，不能像 C 语言中那样直接修改字符串中的某个字符
- 而是应该根据修改要求重新创建新的

Lua 中处理字符串是很高效的，甚至可以处理 100K 甚至 1M 的字符串

字面字符串需要以一对匹配的单引号或双引号来界定：
- 根据编程风格，最好在程序中使用相同类型的引号
- 它也可以包含 C 语言中的转义序列
	- 甚至可以通过转义序列给出：\\\<ddd>
		- ddd 是一个至多 3 个十进制数字组成的序列
- 可以通过一对匹配的双方括号来界定一个字符串，Lua 不会解释其中的转义序列
	- 这种写法对于哪些含有程序代码的字符串尤为有用
	- 如果字符串中有 ]] 了，可以在两个左方括号间加上任意数量的等号
	- 这样字面字符串在遇到一个内嵌有相同数量等号的左右方括号时才会结束

Lua 还提供了运行时数字与字符串的自动转换
- 即在字符串上应用算术操作时，会自动将其转换为数字
- 在任何需要数字的地方，Lua 都会这么做
- 当然，它也会将数字转换为字符串
- 至今仍不能确定这是不是一个好的设计，建议最好不要依赖它
	- 通过函数 tonumber 进行数字转换，如果无法转换会返回 nil 的
	- 通过函数 tostring 或将一个数字与一个空字符串连接来进行字符串转换

字符串连接：
- 通过 ".." 来进行字符串连接
- 注意：在一个数字之后需要加一个空格，否则它会将第一个点理解为小数点

获取字符串长度：
- \# + 字符串

# 2.5 table
---

table 类型实现了关联数组：
- 是一种具有特殊索引方式的数组
- 不仅可以通过整数来索引它，还可以使用字符串或其他类型的值(当然除了 nil)，来索引它
- table 没有固定的大小，可以动态地添加任意数量的元素到一个 table 中

在 Lua 中，table 是一个对象：
- 即一个动态分配的对象，程序仅持有一个对它们引用(或指针)

table 的创建：
- 通过"构造表达式"来完成的
- 最简单的方式就是 {}

table 永远是匿名的，一个持有 table 的变量与 table 自身之间没有固定的关联性：
- 即持有 table 的变量只是持有它的指针
- 当没有任何一个变量持有它的指针时，它才会被销毁

所有 table 都可以用不同类型的索引来访问 value
- 当需要容纳新条目时，table 会自动增长
- table 的某个元素没有初始化时，它的内容就是 nil；当然也可以用 nil 来删除元素
- 它和全局变量很相似，因为 Lua 就是将全局变量存储在一个普通的 table 中的

Lua 为 table 的字符串索引提供了一种语法糖：
- 即 变量.字符串索引 这种方式来进行访问

Lua 中，数组常用 1 作为索引的起始值：
- 不少机制依赖于这个惯例

操作符 # 可以返回一个数组或线性表中最后一个索引值：
- Lua 将 nil 视为界定数组结尾的标志
- 即一个数组有空隙时(中间含有nil)，长度操作符会认为这些 nil 元素就是结尾标记
- 所以应避免对哪些含有空隙的数组使用长度操作符
	- 可以使用函数 table.maxn ，它将返回一个 table 的最大正索引值
	- 这是 Lua 5.1 新特性

# 2.6 function
---

在 Lua 中，函数作为"第一类值"来看待的：相当于是一等公民
- 函数可以存储在变量中
- 可以通过参数传递给其他函数
- 还可以作为其他函数的返回值

# 2.7 userdata 和 thread
---

由于 userdata 类型可以将任意的 C 语言数据存储到 Lua 变量中：
- Lua 对这种类型没有太多的预定义操作
- 只能进行赋值和相等性测试
- 它表示一种由应用程序或 C 语言库所创建的新类型

thread 第 9 章再解释