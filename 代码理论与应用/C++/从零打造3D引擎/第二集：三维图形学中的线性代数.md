# 矢量

大小+方向=矢量

数学上，我们用线段的长度表示大小
- 大小就是一个可以比较的量
- 所以我们用任何可以比较的量都可以表示
- 所以数学上，用线段的长度表示

矢量在图形学中的应用：
1. 用于表示相对位置
2. 用于表示绝对位置，但是需要指定一个坐标原点

## 加法

几何上：首尾相连即可

加法的应用：绝对位置矢量加上相对位置矢量，就是绝对位置矢量

## 减法

a-b = b的尾部指向a的矢量

减法的应用：绝对位置矢量与绝对位置矢量的差，就是相对位置矢量

## 乘法(矢量和标量的乘法)

矢量与标量相乘：矢量方向不变，大小按标量比例缩放

## 矢量在图形学中的应用

多个绝对位置矢量表示一个多边形

构成坐标系：
1. 确定一个原点(仅仅用于计算，无特殊含义)
2. 确定一些方向(坐标轴)
	- 描述点时，用原点描述大小
	- 用提前确定的方向组合描述方向

直角坐标系：或非直角的坐标系
- 逆时针转的就是正定坐标系，否则就是负定坐标系

所以在坐标系中，我们用一个坐标就可以表示一个矢量了：即假设它尾部为原点

矢量的加法代数表示：对应位置相加减

矢量的长度计算：勾股定理即可

矢量与标量的代数表示：标量与矢量的每个位置相乘

矢量的归一化：长度为1的矢量，只是为了表示方向

## 点积

点击的物理意义在于投影，反应的是两个矢量在方向上有多少重合

一般用于判断两个矢量的方向是否一致

几何计算：对应位置相乘，然后相加即可
- 满足交换律和分配律

纯粹判断方向的时候，可以把两个矢量都归一化。

## 叉积

二维叉积的几何意义：是一个标量
- 大小：两个矢量张成平行四边形的面积

三维叉积的几何意义：是一个矢量
- 大小：平行四边形面积
- 方向：右手法则确定

注意：它不满足交换律，交换后正负号相反

可以用于确定一个坐标系(正交)

## 三重积

即三个矢量，一个点积，一个叉积。

确定一个平行立方体的体积

## 模角

模角+长度=极坐标系

三维空间下，就是球坐标系

还要柱坐标系

# GLM 的矢量相关操作

1. 加法：`glm::vec2(1,2) + glm::vec2(3,4) == glm::vec2(4,6)`
2. 标量乘：`3.14f * glm::vec2(1,2) == glm::vec2(3.14f, 6.28f)`
3. 点积：`glm::dot(glm::vec2(1,2), glm::vec2(3,4)) == 11.f`
4. 叉积：`glm::cross(glm::vec2(1,2), glm::vec2(3,4)) == -2.f`
5. 长度：`glm::length(glm::vec2(1,2)) == 5.f`

# 矩阵

一般是先缩放，再旋转

# GLM 的矩阵相关操作

1. 矩阵：`glm::mat3*3`
2. 构造：`glm::mat3*3(a,b,c,d,e,f,g,h,i)`
	- a,b,c
	- d,e,f
	- g,h,i
3. 单位矩阵：`glm::mat3*3(1)`
4. 求逆函数：`glm::inverse(A)`

注意：
```
glm::mat4 m;
m[0] = {1,2,3,4}; // 这表明矩阵的第一列是 1,2,3,4 !!!
```

# 逆变和协变

逆变：点不变，坐标变
- 一般用于坐标系的变化

协变：坐标不变，点变
- 一般用于点的变换

图形学中一般用协变矩阵来表示坐标系，如果希望得到原位置，乘上一个逆变矩阵即可

正交矩阵：转置等于它的逆

# GLM 中的平移矩阵

4\*4可以缩写为4
```
glm::mat4 l2w = glm::translate(glm::vec3(0.0f, 0.5f, 0.0f));

glm::mat3 result = glm::vec3(l2w * glm::vec4(local_pos_3d, 1));
```

注意：运算时，需要用1给三维矢量升维至四维矢量

然后可以再强转为三维，即可得到结果

注意：只有绝对矢量才能平移，最后才为1，如果是相对矢量，我们不想让它变化，就可以用0给它升维，这样就让它的平移失效了

简单来说：逆变是W2L，即世界到局部；协变是L2W，即局部到世界

OpenGL在裁剪空间中使用左手系，其他情况下均使用右手系

# GLM 中的旋转矩阵

绕z轴，旋转60度：`glm::rotate(glm::radians(60), glm::vec3(0,0,1));`

# GLM 中创建缩放矩阵

等比例放大2倍：`glm::scale(glm::vec3(2.0f));`
不等比例缩放：`glm::scale(glm::vec3(2.0f,1.0f,1.0f));`

# OpenGL 中的空间转换

局部空间(输入)->世界空间->视角空间->裁剪空间->光栅化->窗口空间(输出)